@using CogDox.Core
@using CogDox.Core.Lists
@using CogDox.Models
@{
    Layout = "~/Views/Shared/_MainEx.cshtml";
}
@model CogDox.Models.CogDoxPageModel
@section ScriptAndCss {

    
}
@section PageHeader {
    <h3 class="page-title">
			Lista spraw <small>jakiś tam dashboard</small>
		</h3>
		<ul class="breadcrumb">
			<li>
				<i class="icon-home"></i>
				<a href="index.html">Home</a> 
				<i class="icon-angle-right"></i>
			</li>
			<li>
				<a href="#">Portlets</a>
				<i class="icon-angle-right"></i>
			</li>
			<li><a href="#">General Portlets</a></li>
		</ul>
}

<div class="row-fluid">
    <div class="span12">
        <div class="portlet box grey">
            <div class="portlet-title"><div class="caption">Lista spraw</div></div>
            <div class="portlet-body" id="theGrid2"></div>
        </div>
    </div>
    
        <script type="text/javascript">
            Ext.onReady(function () {
                var tView = Ext.create('Ext.panel.Panel', {
                    itemId: 'vDocView', region: 'south', autoScroll: true, collapsed: false, split: true
                });
                var showTask = function (id) {
                    Ext.Ajax.request({
                        url: '@Url.Action("DetailsEmbed", "Task")/' + id,
                        success: function (response) {
                            var text = response.responseText;
                            tView.update(text, true, function () {
                                console.log('view updated');
                            });
                        }
                    });
                };
                var pnl = Ext.create('Ext.panel.Panel', {
                    layout: 'border', renderTo: 'theGrid2', 
                    items: [
                        Ext.create('CogDox.ui.TODOListGrid', {
                            itemId: 'vGrid', height: 300, 
                            region: 'center',
                            listeners: {
                                itemclick: function (p, i) {
                                    showTask(i.data.Id);
                                }
                            }
                        }),
                        tView
                    ]
                });
                var updateSize = function () {
                    var w = Ext.getBody().getViewSize().width;
                    var h = Ext.getBody().getViewSize().height;
                    pnl.setHeight(h - pnl.getY() - 8);
                    pnl.doLayout();
                }
                Ext.EventManager.onWindowResize(updateSize);
                updateSize();
            });
    </script>
</div>

<script>
    Ext.onReady(function () {
        return;
            var v = Ext.create('Ext.container.Viewport', {
                layout: 'border', renderTo: Ext.getBody(), 
                items: [
                    {
                        xtype: 'panel', region: 'north', border: false, 
                        
                        tpl: '<div class="navbar-inner">' +
                            '<div class="container-fluid">' +
                            '<a class="brand" href="index.html">' + 
				            '<img src="assets/img/logo.png" alt="logo" />' + 
				            '</a>' +
                            '</div></div>',
                        data: {}
                    },
                    {
                        xtype: 'panel', region: 'west', border: false,
                        data: {},
                        tpl: '<div class="page-sidebar nav-collapse collapse">' +
			                '<ul class="page-sidebar-menu">' + 
				            '<li class="start ">' +
					        '<a href="index.html">' +
					        '<i class="icon-home"></i>' +
					        '<span class="title">Dashboard</span>' +
					        '</a>' +
				            '</li>'  +
                            '</ul></div>'
                    },
                    {xtype: 'panel', html: '<b> to ja panel </b>', region: 'center', border: false}
                ]
            });
        });
 </script>